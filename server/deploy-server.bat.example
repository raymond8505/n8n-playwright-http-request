@echo off
REM Set defaults - override with environment variables if needed
REM DO NOT COMMIT REAL VALUES - use environment variables in production
set VPS_IP=your.vps.ip.here
set VPS_USER=your_ssh_user
set VPS_PATH=/home/playwright

if "%1"=="quick" (
  echo Quick deploy: syncing server.js only to %VPS_USER%@%VPS_IP%...
  scp server.js %VPS_USER%@%VPS_IP%:%VPS_PATH%/server.js
  echo Restarting container...
  ssh %VPS_USER%@%VPS_IP% "docker restart playwright-scraper"
  echo Quick deploy complete!
) else (
  echo Full deploy: syncing all files to %VPS_USER%@%VPS_IP%:%VPS_PATH% and rebuilding...
  tar czf - --exclude-from=.gitignore --exclude=.git . | ssh %VPS_USER%@%VPS_IP% "rm -rf %VPS_PATH% && mkdir -p %VPS_PATH% && cd %VPS_PATH% && tar xzf -"
  echo Running docker build and deploy...
  ssh %VPS_USER%@%VPS_IP% "cd %VPS_PATH% && chmod +x deploy-docker.sh && ./deploy-docker.sh"
  echo Full deployment complete!
)
pause
